document.addEventListener("DOMContentLoaded",(()=>{const e={browserLanguage:navigator.language||navigator.userLanguage,deviceType:/Mobile|Android|iPhone|iPad|iPod/i.test(navigator.userAgent)?"Mobile":"Desktop",screenResolution:`${window.screen.width}x${window.screen.height}`,languageRegion:{fr:"Français",en:"Anglais","fr-ch":"Suisse français","en-ch":"Suisse anglais",uk:"Royaume-Uni"}[window.location.pathname.split("/")[1]]||"Non spécifié"},t=(t,r,a)=>{const o=document.getElementById(t);if(!o)return;const n={gclid:`${r}-ads-gclid`,camp:`${r}-ads-camp`,adgroup:`${r}-ads-adgroup`,utm_term:`${r}-ads-utm-term`,utm_campaign:`${r}-ads-utm-campaign`,utm_source:`${r}-ads-utm-source`},i={"browser-language":e.browserLanguage,"device-type":e.deviceType,"screen-resolution":e.screenResolution,"language-region":e.languageRegion};Object.entries(n).forEach((([e,t])=>{const r=o.querySelector(`#${t}`);r&&(r.value=a[e]||"")})),Object.entries(i).forEach((([e,t])=>{const a=o.querySelector(`#${r}-${e}`);a&&(a.value=t)}))},r=(e,r,a)=>{const o=document.getElementById(e);o&&o.addEventListener("submit",(()=>{t(e,r,a)}))},a=(()=>{const e=new URLSearchParams(window.location.search);return{gclid:e.get("gclid")||"",camp:e.get("camp")||"",adgroup:e.get("adgroup")||"",utm_term:e.get("utm_term")||"",utm_campaign:e.get("utm_campaign")||"",utm_source:e.get("utm_source")||""}})();Object.values(a).some((e=>e))&&(e=>{const t={...e,timestamp:Date.now()};localStorage.setItem("formParams",JSON.stringify(t))})(a);const o=(()=>{const e=JSON.parse(localStorage.getItem("formParams"))||{};return e.timestamp&&Date.now()-e.timestamp>108e5?{}:e})(),n=Object.values(a).some((e=>e))?a:o,i=()=>{t("wf-form-brief-pro","brief-pro",n),t("wf-form-brief-private","brief-private",n)},s=new MutationObserver((()=>{document.getElementById("wf-form-brief-pro")&&document.getElementById("wf-form-brief-private")&&(i(),s.disconnect())}));document.getElementById("wf-form-brief-pro")&&document.getElementById("wf-form-brief-private")?i():s.observe(document.body,{childList:!0,subtree:!0}),r("wf-form-brief-pro","brief-pro",n),r("wf-form-brief-private","brief-private",n)}));
