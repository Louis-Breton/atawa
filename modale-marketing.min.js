(function(){const t=300,e=300,n=5e3,o=6e4,i=48,r=document.querySelectorAll('[modal="list"]'),a=document.querySelector('[modal="corner-banner"]'),l=document.querySelector('[modal="popup"]'),c=document.querySelectorAll('[modal-close="corner-banner"]'),u=document.querySelectorAll('[modal-close="popup"]');let d,s=!1;const m=e=>localStorage.getItem(`modals_hidden_${e}`)==="true",f=e=>{const t=Date.now()+i*36e5;localStorage.setItem(`modals_hidden_${e}`,"true"),localStorage.setItem(`modals_expiry_${e}`,t)},p=e=>{const t=localStorage.getItem(`modals_expiry_${e}`);t&&Date.now()>parseInt(t,10)&&(localStorage.removeItem(`modals_hidden_${e}`),localStorage.removeItem(`modals_expiry_${e}`))},h=(e,n="block")=>{const o=e.closest('[modal="list"]');o&&(o.style.display="block"),e.style.display=n,e.style.opacity=0;const i=performance.now();requestAnimationFrame(function r(n){const o=Math.min((n-i)/t,1);e.style.opacity=o,o<1&&requestAnimationFrame(r)})},y=(e,t)=>{e.style.opacity=1;const n=performance.now();requestAnimationFrame(function o(i){const r=Math.min((i-n)/e,1);e.style.opacity=1-r,r<1?requestAnimationFrame(o):(e.style.display="none",t&&t())})},v=(t,e)=>{y(e,()=>f(t))},x=e=>{e.clientY<=0&&!s&&a.style.display!=="block"&&(s=!0,h(l,"flex"))},g=()=>{clearTimeout(d),!s&&a.style.display!=="block"&&(d=setTimeout(()=>{s=!0,h(l,"flex")},o))};m("corner-banner")||window.innerWidth>=768&&(p("corner-banner"),setTimeout(()=>{s||h(a,"block")},n)),m("popup")||(p("popup"),document.addEventListener("mousemove",g),document.addEventListener("keydown",g),document.addEventListener("mouseleave",x)),c.forEach(t=>{t.addEventListener("click",()=>v("corner-banner",a))}),u.forEach(t=>{t.addEventListener("click",()=>v("popup",l))})})();
