document.addEventListener("DOMContentLoaded",(function(){function e(e){const t=document.querySelector('select[name="'+e+'"]');if(t){const e=new Set;t.querySelectorAll("option").forEach((t=>{e.add(t.value)}));const r=(navigator.language||navigator.userLanguage||"en").toLowerCase().startsWith("fr")?["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"]:["January","February","March","April","May","June","July","August","September","October","November","December"],o=new Date;for(let a=0;a<16;a++){const l=new Date(o.getFullYear(),o.getMonth()+a,1),n=r[l.getMonth()]+" "+l.getFullYear();if(!e.has(n)){const e=document.createElement("option");e.value=n,e.textContent=n,t.appendChild(e)}}}}e("brief-pro-date-periode"),e("brief-private-date-periode"),document.querySelectorAll('[selectpopulate^="origine"]').forEach((e=>{const t=e.getAttribute("selectpopulate"),r=t.replace("origine","destination");!function(e,t){const r=document.querySelector(`select[selectpopulate="${e}"]`),o=document.querySelector(`.dropdown_wrapper[selectpopulate="${t}"]`),a=o.querySelector(".dropdown_list"),l=o.querySelector(".w-dropdown-toggle"),n=l.querySelector("div:first-child");function i(){l.classList.remove("w--open"),l.setAttribute("aria-expanded","false"),a.classList.remove("w--open"),a.style.opacity="0",a.style.transform="translate3d(0px, -2rem, 0px)"}r.querySelectorAll("option").forEach((e=>{const t=e.value,r=e.textContent;if(t){const e=document.createElement("a");e.href="#",e.classList.add("dropdown_link","w-dropdown-link"),e.setAttribute("data-value",t),e.setAttribute("role","menuitem"),e.textContent=r,a.appendChild(e)}})),a.addEventListener("click",(function(e){if(e.target.matches(".dropdown_link")){e.preventDefault();const t=e.target.getAttribute("data-value"),o=e.target.textContent;r.value=t,r.dispatchEvent(new Event("change")),n.textContent=o,l.classList.remove("is-error"),i()}})),r.addEventListener("change",(function(){const e=r.options[r.selectedIndex].textContent;n.textContent=e,l.classList.remove("is-error")})),document.addEventListener("click",(function(e){o.contains(e.target)||"true"!==l.getAttribute("aria-expanded")||i()}))}(t,r)})),document.querySelectorAll('[btn="check-error"]').forEach((e=>{e.addEventListener("click",(function(){const t=e.closest("form");if(!t)return;t.querySelectorAll('input:not([type="radio"]), textarea, select').forEach((e=>{if(e.hasAttribute("required")){let t="checkbox"===e.type?e.checked:""!==e.value.trim(),r=e.closest(".form_field-wrapper");if(t){if(e.classList.remove("is-error"),r){r.classList.remove("is-error");const t=r.querySelector(`.form_label-error[error-label="${e.name}"]`);t&&(t.style.display="none")}}else if(e.classList.add("is-error"),r){r.classList.add("is-error");const t=r.querySelector(`.form_label-error[error-label="${e.name}"]`);t&&(t.style.display="block")}}}));const r=t.querySelector('[date-switch="full-date"]');if(r){const e=r.querySelector('input[name="brief-private-date-start-desktop"]'),t=r.querySelector('input[name="brief-private-date-end-desktop"]'),o=r.querySelector('input[name="brief-private-date-start-mobile"]'),a=r.querySelector('input[name="brief-private-date-end-mobile"]'),l=o&&"none"!==window.getComputedStyle(o).display;let n=l?""!==o.value.trim()&&""!==a.value.trim():""!==e.value.trim()&&""!==t.value.trim();const i=r.querySelector(".form_input.is-datepicker");if(n){i&&i.classList.remove("is-error");const e=r.querySelector(`.form_label-error[error-label="brief-private-date-start-${l?"mobile":"desktop"}"]`),t=r.querySelector(`.form_label-error[error-label="brief-private-date-end-${l?"mobile":"desktop"}"]`);e&&(e.style.display="none"),t&&(t.style.display="none")}else{i&&i.classList.add("is-error");const e=r.querySelector(`.form_label-error[error-label="brief-private-date-start-${l?"mobile":"desktop"}"]`),t=r.querySelector(`.form_label-error[error-label="brief-private-date-end-${l?"mobile":"desktop"}"]`);e&&(e.style.display="block"),t&&(t.style.display="block")}}}))}))}));
