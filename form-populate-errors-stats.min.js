document.addEventListener("DOMContentLoaded",(function(){function e(e,t){const r={};e.querySelectorAll(`input[type="radio"][required][name^="${t}"]`).forEach((e=>{const t=e.name;r[t]||(r[t]=[]),r[t].push(e)})),Object.keys(r).forEach((e=>{const t=r[e],o=t.some((e=>e.checked)),s=t[0].closest(".form_check-group");t.forEach((e=>{const t=e.closest("label.w-radio");if(o){if(t){t.classList.remove("is-error");const e=t.querySelector(".w-radio-input");e&&e.classList.remove("is-error")}s&&s.classList.remove("is-error")}else{if(t){t.classList.add("is-error");const e=t.querySelector(".w-radio-input");e&&e.classList.add("is-error")}s&&s.classList.add("is-error")}}))}))}function t(e,t){e.querySelectorAll(`input[type="checkbox"][required][name^="${t}"]`).forEach((e=>{if(!e.checked){e.classList.add("is-error");const t=e.closest("label.w-checkbox");if(t){t.classList.add("is-error");const e=t.querySelector(".w-checkbox-input");e&&e.classList.add("is-error")}}}))}function r(e){const t=document.querySelector('select[name="'+e+'"]');if(t){const e=new Set;t.querySelectorAll("option").forEach((t=>{e.add(t.value)}));const r=(navigator.language||navigator.userLanguage||"en").toLowerCase().startsWith("fr")?["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"]:["January","February","March","April","May","June","July","August","September","October","November","December"],o=new Date;for(let s=0;s<16;s++){const i=new Date(o.getFullYear(),o.getMonth()+s,1),a=r[i.getMonth()]+" "+i.getFullYear();if(!e.has(a)){const e=document.createElement("option");e.value=a,e.textContent=a,t.appendChild(e)}}}}r("brief-pro-date-periode"),r("brief-private-date-periode"),document.querySelectorAll('[selectpopulate^="origine"]').forEach((e=>{const t=e.getAttribute("selectpopulate"),r=t.replace("origine","destination");!function(e,t){const r=document.querySelector(`select[selectpopulate="${e}"]`),o=document.querySelector(`.dropdown_wrapper[selectpopulate="${t}"]`),s=o.querySelector(".dropdown_list"),i=o.querySelector(".w-dropdown-toggle"),a=i.querySelector("div:first-child");function l(){i.classList.remove("w--open"),i.setAttribute("aria-expanded","false"),s.classList.remove("w--open"),s.style.opacity="0",s.style.transform="translate3d(0px, -2rem, 0px)"}r.querySelectorAll("option").forEach((e=>{const t=e.value,r=e.textContent;if(t){const e=document.createElement("a");e.href="#",e.classList.add("dropdown_link","w-dropdown-link"),e.setAttribute("data-value",t),e.setAttribute("role","menuitem"),e.textContent=r,s.appendChild(e)}})),s.addEventListener("click",(function(e){if(e.target.matches(".dropdown_link")){e.preventDefault();const t=e.target.getAttribute("data-value"),o=e.target.textContent;r.value=t,r.dispatchEvent(new Event("change")),a.textContent=o,i.classList.remove("is-error"),l()}})),r.addEventListener("change",(function(){const e=r.options[r.selectedIndex].textContent;a.textContent=e,i.classList.remove("is-error")})),document.addEventListener("click",(function(e){o.contains(e.target)||"true"!==i.getAttribute("aria-expanded")||l()})),r.addEventListener("invalid",(function(){i.classList.add("is-error")})),r.addEventListener("input",(function(){r.checkValidity()&&i.classList.remove("is-error")}))}(t,r)})),document.querySelectorAll('[btn="check-error"]').forEach((r=>{r.addEventListener("click",(function(){const o=r.closest("form");if(!o)return;o.querySelectorAll('input:not([type="radio"]), textarea, select').forEach((e=>{if(e.hasAttribute("required")&&e.name&&(e.name.startsWith("brief-pro")||e.name.startsWith("brief-private"))){let t,r=""!==e.value.trim();if("checkbox"===e.type&&(r=e.checked),t="checkbox"===e.type?e.closest("label.w-checkbox"):"brief-pro-date-periode"===e.name||"brief-private-date-periode"===e.name?e.closest('[date-switch="period-date"]'):e.closest(".form_field-wrapper"),r){if(e.classList.remove("is-error"),t){if(t.classList.remove("is-error"),"checkbox"===e.type){const e=t.querySelector(".w-checkbox-input");e&&e.classList.remove("is-error")}const r=t.querySelector(`.form_label-error[error-label="${e.name}"]`);r&&(r.style.display="none")}}else if(e.classList.add("is-error"),t){if(t.classList.add("is-error"),"checkbox"===e.type){const e=t.querySelector(".w-checkbox-input");e&&e.classList.add("is-error")}const r=t.querySelector(`.form_label-error[error-label="${e.name}"]`);r&&(r.style.display="block")}}}));const s=o.querySelector('[date-switch="full-date"]');if(s){const e=s.querySelector('input[name$="date-start-desktop"]'),t=s.querySelector('input[name$="date-end-desktop"]'),r=s.querySelector('input[name$="date-start-mobile"]'),o=s.querySelector('input[name$="date-end-mobile"]'),i=r&&"none"!==window.getComputedStyle(r).display;let a=i?""!==r.value.trim()&&""!==o.value.trim():""!==e.value.trim()&&""!==t.value.trim();const l=s.querySelector(".form_input.is-datepicker");if(a){l&&l.classList.remove("is-error");const e=s.querySelector(`.form_label-error[error-label$="date-start-${i?"mobile":"desktop"}"]`),t=s.querySelector(`.form_label-error[error-label$="date-end-${i?"mobile":"desktop"}"]`);e&&(e.style.display="none"),t&&(t.style.display="none")}else{l&&l.classList.add("is-error");const e=s.querySelector(`.form_label-error[error-label$="date-start-${i?"mobile":"desktop"}"]`),t=s.querySelector(`.form_label-error[error-label$="date-end-${i?"mobile":"desktop"}"]`);e&&(e.style.display="block"),t&&(t.style.display="block")}}t(o,"brief-pro"),t(o,"brief-private"),e(o,"brief-pro"),e(o,"brief-private");const i=o.querySelector('[tooltip="error"]');if(i){let e=!1;o.querySelectorAll("input, textarea, select").forEach((t=>{const r=t.hasAttribute("required"),o="none"!==window.getComputedStyle(t).display,s=t.name&&(t.name.startsWith("brief-pro")||t.name.startsWith("brief-private"));r&&o&&s&&("checkbox"!==t.type&&"radio"!==t.type||t.checked?"checkbox"!==t.type&&"radio"!==t.type&&""===t.value.trim()&&(e=!0):e=!0)}));const t=o.querySelector('input[name$="date-start-mobile"]'),r=o.querySelector('input[name$="date-end-mobile"]'),s=o.querySelector('input[name$="date-start-desktop"]'),a=o.querySelector('input[name$="date-end-desktop"]');(t&&"none"!==window.getComputedStyle(t).display?""!==t?.value.trim()&&""!==r?.value.trim():""!==s?.value.trim()&&""!==a?.value.trim())||(e=!0),i.style.display=e?"block":"none"}}))})),document.querySelectorAll("form").forEach((e=>{e.querySelectorAll("input, textarea, select").forEach((t=>{["input","change"].forEach((r=>{t.addEventListener(r,(function(){if(t.hasAttribute("required")&&("checkbox"===t.type||"radio"===t.type||t.name&&(t.name.startsWith("brief-pro")||t.name.startsWith("brief-private")))){if("checkbox"===t.type||"radio"===t.type?t.checked:""!==t.value.trim()){let r;if(t.classList.remove("is-error"),"checkbox"===t.type){if(r=t.closest("label.w-checkbox"),r){r.classList.remove("is-error");const e=r.querySelector(".w-checkbox-input");e&&e.classList.remove("is-error")}}else if("radio"===t.type){e.querySelectorAll(`input[type="radio"][name="${t.name}"]`).forEach((e=>{const t=e.closest("label.w-radio");if(t){t.classList.remove("is-error");const e=t.querySelector(".w-radio-input");e&&e.classList.remove("is-error")}}));const r=t.closest(".form_check-group");r&&r.classList.remove("is-error")}else if("brief-pro-date-periode"===t.name||"brief-private-date-periode"===t.name){if(r=t.closest('[date-switch="period-date"]'),r){r.classList.remove("is-error");const e=r.querySelector(".w-dropdown-toggle");e&&e.classList.remove("is-error");const o=r.querySelector(`.form_label-error[error-label="${t.name}"]`);o&&(o.style.display="none")}}else if(r=t.closest(".form_field-wrapper"),r){r.classList.remove("is-error");const e=r.querySelector(`.form_label-error[error-label="${t.name}"]`);e&&(e.style.display="none")}}}}))}))}))})),document.querySelectorAll('[date-switch="full-date"]').forEach((e=>{e.addEventListener("click",(function(){const t=e.querySelector(".form_input.is-datepicker");t&&t.classList.remove("is-error");["brief-private-date-start-desktop","brief-private-date-end-desktop","brief-private-date-start-mobile","brief-private-date-end-mobile","brief-pro-date-start-desktop","brief-pro-date-end-desktop","brief-pro-date-start-mobile","brief-pro-date-end-mobile"].forEach((t=>{const r=e.querySelector(`.form_label-error[error-label="${t}"]`);r&&(r.style.display="none")}))}))}))}));
