document.addEventListener("DOMContentLoaded",(function(){function e(e){if(!e)return;e.classList.remove("is-error");const r=e.closest(".form_field-wrapper")||e.closest(".form_check-group");r&&r.classList.remove("is-error");const t=document.querySelector(`[error-label="${e.name}"]`);t&&(t.style.display="none");const o=document.querySelector(`.w-dropdown-toggle[error-label-link="${e.name}"]`);o&&o.classList.remove("is-error")}let r=null;document.querySelectorAll("form[form-prefix]").forEach((t=>{const o=t.getAttribute("form-prefix");!function(r,t){r.querySelectorAll(`input[name^="brief-${t}-date-start"], input[name^="brief-${t}-date-end"]`).forEach((e=>{e.addEventListener("click",(()=>{const e=r.querySelector('[date-switch="full-date"]'),t=e?.querySelectorAll("[error-label]");t&&t.forEach((e=>e.style.display="none"));const o=e?.querySelectorAll(".is-error");o&&o.forEach((e=>e.classList.remove("is-error")))}))})),r.querySelectorAll(`input[type="radio"][name^="brief-${t}-"]`).forEach((e=>{e.addEventListener("change",(()=>{const t=e.name;r.querySelectorAll(`input[name="${t}"]`).forEach((e=>{e.classList.remove("is-error");const r=e.closest("label.w-radio");r&&r.classList.remove("is-error");const t=r?.querySelector(".w-radio-input");t&&t.classList.remove("is-error")}))}))})),r.querySelectorAll(`input[type="checkbox"][name^="brief-${t}-"]`).forEach((e=>{e.addEventListener("change",(()=>{e.classList.remove("is-error");const r=e.closest("label.w-checkbox"),t=r?.querySelector(".w-checkbox-input");r&&r.classList.remove("is-error"),t&&t.classList.remove("is-error")}))}));const o=r.querySelector(`[name="brief-${t}-guest"]`),l=r.querySelector(`[name="brief-${t}-surface"]`);[o,l].forEach((r=>{r&&r.addEventListener("input",(()=>{const r=o?.value.trim(),t=l?.value.trim();(r||t)&&[o,l].forEach((r=>e(r)))}))})),r.querySelectorAll(`input[name^="brief-${t}-"], textarea[name^="brief-${t}-"]`).forEach((r=>{r.addEventListener("input",(()=>e(r)))})),r.querySelectorAll("select").forEach((r=>{r.addEventListener("change",(()=>e(r)))}))}(t,o),document.querySelectorAll('select[selectpopulate^="origine"]').forEach((e=>{const r=e.getAttribute("selectpopulate").replace("origine","destination"),t=document.querySelector(`.dropdown_wrapper[selectpopulate="${r}"]`);if(!t)return;const o=t.querySelector(".dropdown_list"),l=t.querySelector(".w-dropdown-toggle"),s=l?.querySelector("div:first-child");o&&l&&s&&(o.innerHTML="",[...e.options].forEach((e=>{if(e.value){const r=document.createElement("a");r.href="#",r.className="dropdown_link w-dropdown-link",r.setAttribute("data-value",e.value),r.textContent=e.textContent,o.appendChild(r)}})),o.querySelectorAll(".dropdown_link").forEach((r=>{r.addEventListener("click",(t=>{t.preventDefault();const c=r.getAttribute("data-value"),a=r.textContent;e.value=c,e.dispatchEvent(new Event("change")),s.textContent=a;const n=e.getAttribute("name"),i=document.querySelector(`.w-dropdown-toggle[error-label-link="${n}"]`);i&&i.classList.remove("is-error");const u=document.querySelector(`[error-label="${n}"]`);u&&(u.style.display="none"),l.classList.remove("w--open"),o.classList.remove("w--open"),o.style.opacity="0",o.style.transform="translate3d(0px, -2rem, 0px)"}))})))})),t.querySelectorAll('[btn="check-error"]').forEach((e=>{e.addEventListener("click",(()=>{!function(e){const t=e.getAttribute("form-prefix");let o=!1;const l=e=>{if(!e)return;e.classList.add("is-error");const r=e.closest(".form_field-wrapper")||e.closest(".form_check-group");r&&r.classList.add("is-error");const t=document.querySelector(`[error-label="${e.name}"]`);t&&(t.style.display="block");const l=document.querySelector(`.w-dropdown-toggle[error-label-link="${e.name}"]`);l&&l.classList.add("is-error"),o=!0};e.querySelectorAll(`select[required][name^="brief-${t}-"]`).forEach((r=>{const t=null!==r.offsetParent;if(!r.value.trim()){l(r);const o=r.getAttribute("name"),s=e.querySelector(`.w-dropdown-toggle[error-label-link="${o}"]`);s&&!t&&s.classList.add("is-error")}})),e.querySelectorAll('input[required]:not([type="radio"]):not([type="checkbox"]), textarea[required]').forEach((e=>{e.offsetParent&&!e.value.trim()&&l(e)}));const s={};e.querySelectorAll(`input[type="radio"][required][name^="brief-${t}-"]`).forEach((e=>{s[e.name]||(s[e.name]=[]),s[e.name].push(e)})),Object.values(s).forEach((e=>{e.some((e=>e.checked))||(e.forEach((e=>{e.classList.add("is-error");const r=e.closest("label.w-radio");r&&r.classList.add("is-error");const t=r?.querySelector(".w-radio-input");t&&t.classList.add("is-error")})),o=!0)})),e.querySelectorAll(`input[type="checkbox"][required][name^="brief-${t}-"]`).forEach((e=>{if(!e.checked&&e.offsetParent){e.classList.add("is-error");const r=e.closest("label.w-checkbox");r&&r.classList.add("is-error");const t=r?.querySelector(".w-checkbox-input");t&&t.classList.add("is-error"),o=!0}}));const c=e.querySelector(`[name="brief-${t}-guest"]`),a=e.querySelector(`[name="brief-${t}-surface"]`),n=c?.value.trim(),i=a?.value.trim();n||i||[c,a].forEach((e=>l(e)));const u=e.querySelector(`select[name="brief-${t}-date-periode"]`),d=u?.closest('[date-switch="period-date"]');d?.offsetParent&&!u.value.trim()&&l(u);const m=e.querySelector('[date-switch="full-date"]');if(m?.offsetParent){const e=m.querySelector(`[name="brief-${t}-date-start-mobile"]`),r=m.querySelector(`[name="brief-${t}-date-end-mobile"]`),o=m.querySelector(`[name="brief-${t}-date-start-desktop"]`),s=m.querySelector(`[name="brief-${t}-date-end-desktop"]`),c=null!==e?.offsetParent;(c?e?.value.trim()&&r?.value.trim():o?.value.trim()&&s?.value.trim())||(c?(e&&!e.value.trim()&&l(e),r&&!r.value.trim()&&l(r)):(o&&!o.value.trim()&&l(o),s&&!s.value.trim()&&l(s)))}const f=e.querySelector('[tooltip="error"]');f&&(o?(f.style.display="block",clearTimeout(r),r=setTimeout((()=>{f.style.display="none"}),6e3)):f.style.display="none"),e.querySelector(".is-error")}(t)}))}))}))}));
