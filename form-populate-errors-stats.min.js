document.addEventListener("DOMContentLoaded",(function(){function e(e,r){const t={};e.querySelectorAll(`input[type="radio"][required][name^="${r}"]`).forEach((e=>{const r=e.name;t[r]||(t[r]=[]),t[r].push(e)})),Object.keys(t).forEach((e=>{const r=t[e],o=r.some((e=>e.checked)),i=r[0].closest(".form_check-group");r.forEach((e=>{const r=e.closest("label.w-radio");if(o){if(r){r.classList.remove("is-error");const e=r.querySelector(".w-radio-input");e&&e.classList.remove("is-error")}i&&i.classList.remove("is-error")}else{if(r){r.classList.add("is-error");const e=r.querySelector(".w-radio-input");e&&e.classList.add("is-error")}i&&i.classList.add("is-error")}}))}))}function r(e,r){e.querySelectorAll(`input[type="checkbox"][required][name^="${r}"]`).forEach((e=>{if(!e.checked){e.classList.add("is-error");const r=e.closest("label.w-checkbox");if(r){r.classList.add("is-error");const e=r.querySelector(".w-checkbox-input");e&&e.classList.add("is-error")}}}))}function t(e){const r=document.querySelector('select[name="'+e+'"]');if(r){const e=new Set;r.querySelectorAll("option").forEach((r=>{e.add(r.value)}));const t=(navigator.language||navigator.userLanguage||"en").toLowerCase().startsWith("fr")?["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"]:["January","February","March","April","May","June","July","August","September","October","November","December"],o=new Date;for(let i=0;i<16;i++){const s=new Date(o.getFullYear(),o.getMonth()+i,1),a=t[s.getMonth()]+" "+s.getFullYear();if(!e.has(a)){const e=document.createElement("option");e.value=a,e.textContent=a,r.appendChild(e)}}}}t("brief-pro-date-periode"),t("brief-private-date-periode"),document.querySelectorAll('[selectpopulate^="origine"]').forEach((e=>{const r=e.getAttribute("selectpopulate"),t=r.replace("origine","destination");!function(e,r){const t=document.querySelector(`select[selectpopulate="${e}"]`),o=document.querySelector(`.dropdown_wrapper[selectpopulate="${r}"]`),i=o.querySelector(".dropdown_list"),s=o.querySelector(".w-dropdown-toggle"),a=s.querySelector("div:first-child");function l(){s.classList.remove("w--open"),s.setAttribute("aria-expanded","false"),i.classList.remove("w--open"),i.style.opacity="0",i.style.transform="translate3d(0px, -2rem, 0px)"}t.querySelectorAll("option").forEach((e=>{const r=e.value,t=e.textContent;if(r){const e=document.createElement("a");e.href="#",e.classList.add("dropdown_link","w-dropdown-link"),e.setAttribute("data-value",r),e.setAttribute("role","menuitem"),e.textContent=t,i.appendChild(e)}})),i.addEventListener("click",(function(e){if(e.target.matches(".dropdown_link")){e.preventDefault();const r=e.target.getAttribute("data-value"),o=e.target.textContent;t.value=r,t.dispatchEvent(new Event("change")),a.textContent=o,s.classList.remove("is-error"),l()}})),t.addEventListener("change",(function(){const e=t.options[t.selectedIndex].textContent;a.textContent=e,s.classList.remove("is-error")})),document.addEventListener("click",(function(e){o.contains(e.target)||"true"!==s.getAttribute("aria-expanded")||l()})),t.addEventListener("invalid",(function(){s.classList.add("is-error")})),t.addEventListener("input",(function(){t.checkValidity()&&s.classList.remove("is-error")}))}(r,t)})),document.querySelectorAll('[btn="check-error"]').forEach((t=>{t.addEventListener("click",(function(){const o=t.closest("form");if(!o)return;o.querySelectorAll('input:not([type="radio"]), textarea, select').forEach((e=>{if(e.hasAttribute("required")&&e.name&&(e.name.startsWith("brief-pro")||e.name.startsWith("brief-private"))){let r,t=""!==e.value.trim();if("checkbox"===e.type&&(t=e.checked),r="checkbox"===e.type?e.closest("label.w-checkbox"):"brief-pro-date-periode"===e.name||"brief-private-date-periode"===e.name?e.closest('[date-switch="period-date"]'):e.closest(".form_field-wrapper"),t){if(e.classList.remove("is-error"),r){if(r.classList.remove("is-error"),"checkbox"===e.type){const e=r.querySelector(".w-checkbox-input");e&&e.classList.remove("is-error")}const t=r.querySelector(`.form_label-error[error-label="${e.name}"]`);t&&(t.style.display="none")}}else if(e.classList.add("is-error"),r){if(r.classList.add("is-error"),"checkbox"===e.type){const e=r.querySelector(".w-checkbox-input");e&&e.classList.add("is-error")}const t=r.querySelector(`.form_label-error[error-label="${e.name}"]`);t&&(t.style.display="block")}}}));const i=o.querySelector('[date-switch="full-date"]');if(i){const e=i.querySelector('input[name="brief-private-date-start-desktop"]'),r=i.querySelector('input[name="brief-private-date-end-desktop"]'),t=i.querySelector('input[name="brief-private-date-start-mobile"]'),o=i.querySelector('input[name="brief-private-date-end-mobile"]'),s=t&&"none"!==window.getComputedStyle(t).display;let a=s?""!==t.value.trim()&&""!==o.value.trim():""!==e.value.trim()&&""!==r.value.trim();const l=i.querySelector(".form_input.is-datepicker");if(a){l&&l.classList.remove("is-error");const e=i.querySelector(`.form_label-error[error-label="brief-private-date-start-${s?"mobile":"desktop"}"]`),r=i.querySelector(`.form_label-error[error-label="brief-private-date-end-${s?"mobile":"desktop"}"]`);e&&(e.style.display="none"),r&&(r.style.display="none")}else{l&&l.classList.add("is-error");const e=i.querySelector(`.form_label-error[error-label="brief-private-date-start-${s?"mobile":"desktop"}"]`),r=i.querySelector(`.form_label-error[error-label="brief-private-date-end-${s?"mobile":"desktop"}"]`);e&&(e.style.display="block"),r&&(r.style.display="block")}}r(o,"brief-pro"),r(o,"brief-private"),e(o,"brief-pro"),e(o,"brief-private")}))})),document.querySelectorAll("form").forEach((e=>{e.querySelectorAll("input, textarea, select").forEach((r=>{["input","change"].forEach((t=>{r.addEventListener(t,(function(){if(r.hasAttribute("required")&&("checkbox"===r.type||"radio"===r.type||r.name&&(r.name.startsWith("brief-pro")||r.name.startsWith("brief-private")))){let t;if(t="checkbox"===r.type||"radio"===r.type?r.checked:""!==r.value.trim(),t){let t;if(r.classList.remove("is-error"),"checkbox"===r.type){if(t=r.closest("label.w-checkbox"),t){t.classList.remove("is-error");const e=t.querySelector(".w-checkbox-input");e&&e.classList.remove("is-error")}}else if("radio"===r.type){if(r.checked){e.querySelectorAll(`input[type="radio"][name="${r.name}"]`).forEach((e=>{const r=e.closest("label.w-radio");if(r){r.classList.remove("is-error");const e=r.querySelector(".w-radio-input");e&&e.classList.remove("is-error")}}));const t=r.closest(".form_check-group");t&&t.classList.remove("is-error")}}else if("brief-pro-date-periode"===r.name||"brief-private-date-periode"===r.name){if(t=r.closest('[date-switch="period-date"]'),t){t.classList.remove("is-error");const e=t.querySelector(".w-dropdown-toggle");e&&e.classList.remove("is-error");const o=t.querySelector(`.form_label-error[error-label="${r.name}"]`);o&&(o.style.display="none")}}else if(t=r.closest(".form_field-wrapper"),t){t.classList.remove("is-error");const e=t.querySelector(`.form_label-error[error-label="${r.name}"]`);e&&(e.style.display="none")}}}}))}))}))})),document.querySelectorAll('[date-switch="full-date"]').forEach((e=>{e.addEventListener("click",(function(){const r=e.querySelector(".form_input.is-datepicker");r&&r.classList.remove("is-error");["brief-private-date-start-desktop","brief-private-date-end-desktop","brief-private-date-start-mobile","brief-private-date-end-mobile","brief-pro-date-start-desktop","brief-pro-date-end-desktop","brief-pro-date-start-mobile","brief-pro-date-end-mobile"].forEach((r=>{const t=e.querySelector(`.form_label-error[error-label="${r}"]`);t&&(t.style.display="none")}))}))}))}));
