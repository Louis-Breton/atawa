document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll('[btn="check-error"]').forEach((e=>{e.addEventListener("click",(function(){const r=e.closest("form");if(!r)return;const t=r.getAttribute("form-prefix");if(!t)return;r.querySelectorAll('input:not([type="radio"]), textarea, select').forEach((e=>{if(e.name&&e.name.startsWith(`brief-${t}`)&&e.hasAttribute("required")){const r=!function(e,r){const t=e.hasAttribute("required"),o="none"!==window.getComputedStyle(e).display,s=e.name&&e.name.startsWith(`brief-${r}`);return!!(t&&o&&s)&&(!("checkbox"!==e.type&&"radio"!==e.type||e.checked)||"checkbox"!==e.type&&"radio"!==e.type&&""===e.value.trim())}(e,t);let o;if(o="checkbox"===e.type?e.closest("label.w-checkbox"):e.name===`brief-${t}-date-periode`?e.closest('[date-switch="period-date"]'):e.closest(".form_field-wrapper"),r){if(e.classList.remove("is-error"),o){if(o.classList.remove("is-error"),"checkbox"===e.type){const e=o.querySelector(".w-checkbox-input");e&&e.classList.remove("is-error")}const r=o.querySelector(`.form_label-error[error-label="${e.name}"]`);r&&(r.style.display="none")}}else if(e.classList.add("is-error"),o){if(o.classList.add("is-error"),"checkbox"===e.type){const e=o.querySelector(".w-checkbox-input");e&&e.classList.add("is-error")}const r=o.querySelector(`.form_label-error[error-label="${e.name}"]`);r&&(r.style.display="block")}}}));const o=r.querySelector('[date-switch="full-date"]');if(o){const e=t,r=o.querySelector(`input[name="brief-${e}-date-start-desktop"]`),s=o.querySelector(`input[name="brief-${e}-date-end-desktop"]`),i=o.querySelector(`input[name="brief-${e}-date-start-mobile"]`),l=o.querySelector(`input[name="brief-${e}-date-end-mobile"]`),c=i&&"none"!==window.getComputedStyle(i).display,a=c?""!==i.value.trim()&&""!==l.value.trim():""!==r.value.trim()&&""!==s.value.trim(),n=o.querySelector(".form_input.is-datepicker");if(a){n&&n.classList.remove("is-error");const r=o.querySelector(`.form_label-error[error-label="brief-${e}-date-start-${c?"mobile":"desktop"}"]`),t=o.querySelector(`.form_label-error[error-label="brief-${e}-date-end-${c?"mobile":"desktop"}"]`);r&&(r.style.display="none"),t&&(t.style.display="none")}else{n&&n.classList.add("is-error");const r=o.querySelector(`.form_label-error[error-label="brief-${e}-date-start-${c?"mobile":"desktop"}"]`),t=o.querySelector(`.form_label-error[error-label="brief-${e}-date-end-${c?"mobile":"desktop"}"]`);r&&(r.style.display="block"),t&&(t.style.display="block")}}!function(e,r){e.querySelectorAll(`input[type="checkbox"][required][name^="${r}"]`).forEach((e=>{if(!e.checked){e.classList.add("is-error");const r=e.closest("label.w-checkbox");if(r){r.classList.add("is-error");const e=r.querySelector(".w-checkbox-input");e&&e.classList.add("is-error")}}}))}(r,`brief-${t}`),function(e,r){const t={};e.querySelectorAll(`input[type="radio"][required][name^="${r}"]`).forEach((e=>{const r=e.name;t[r]||(t[r]=[]),t[r].push(e)})),Object.keys(t).forEach((e=>{const r=t[e],o=r.some((e=>e.checked)),s=r[0].closest(".form_check-group");r.forEach((e=>{const r=e.closest("label.w-radio");if(o){r&&r.classList.remove("is-error");const e=r?.querySelector(".w-radio-input");e&&e.classList.remove("is-error"),s&&s.classList.remove("is-error")}else{r&&r.classList.add("is-error");const e=r?.querySelector(".w-radio-input");e&&e.classList.add("is-error"),s&&s.classList.add("is-error")}}))}))}(r,`brief-${t}`)}))}))}));
