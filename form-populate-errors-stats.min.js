document.addEventListener("DOMContentLoaded",(function(){function e(e){const r=document.querySelector('select[name="'+e+'"]');if(r){r.innerHTML="";const e=(navigator.language||navigator.userLanguage||"en").toLowerCase().startsWith("fr")?["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"]:["January","February","March","April","May","June","July","August","September","October","November","December"],t=new Date;for(let o=0;o<16;o++){const s=new Date(t.getFullYear(),t.getMonth()+o,1),i=e[s.getMonth()]+" "+s.getFullYear(),l=document.createElement("option");l.value=i,l.textContent=i,r.appendChild(l)}}}e("brief-pro-date-periode"),e("brief-private-date-periode"),document.querySelectorAll('[selectpopulate^="origine"]').forEach((e=>{const r=e.getAttribute("selectpopulate"),t=r.replace("origine","destination");!function(e,r){const t=document.querySelector(`select[selectpopulate="${e}"]`),o=document.querySelector(`.dropdown_wrapper[selectpopulate="${r}"]`),s=o.querySelector(".dropdown_list"),i=o.querySelector(".w-dropdown-toggle"),l=i.querySelector("div:first-child");function a(){i.classList.remove("w--open"),i.setAttribute("aria-expanded","false"),s.classList.remove("w--open"),s.style.opacity="0",s.style.transform="translate3d(0px, -2rem, 0px)"}t.querySelectorAll("option").forEach((e=>{const r=e.value,t=e.textContent;if(r){const e=document.createElement("a");e.href="#",e.classList.add("dropdown_link","w-dropdown-link"),e.setAttribute("data-value",r),e.setAttribute("role","menuitem"),e.textContent=t,s.appendChild(e)}})),s.addEventListener("click",(function(e){if(e.target.matches(".dropdown_link")){e.preventDefault();const r=e.target.getAttribute("data-value"),o=e.target.textContent;t.value=r,t.dispatchEvent(new Event("change")),l.textContent=o,i.classList.remove("is-error"),a()}})),t.addEventListener("change",(function(){const e=t.options[t.selectedIndex].textContent;l.textContent=e,i.classList.remove("is-error")})),document.addEventListener("click",(function(e){o.contains(e.target)||"true"!==i.getAttribute("aria-expanded")||a()})),t.addEventListener("invalid",(function(){i.classList.add("is-error")})),t.addEventListener("input",(function(){t.checkValidity()&&i.classList.remove("is-error")}))}(r,t)})),document.querySelectorAll('[btn="check-error"]').forEach((e=>{e.addEventListener("click",(function(){const r=e.closest("form");if(!r)return;const t=r.querySelector('[date-switch="switch"]');r.querySelectorAll('input:not([type="radio"]), textarea, select').forEach((e=>{if(e.hasAttribute("required")){if(("brief-pro-date-periode"===e.name||"brief-private-date-periode"===e.name)&&t&&"true"!==t.getAttribute("aria-checked")){e.classList.remove("is-error");let r=e.closest('[date-switch="period-date"]');if(r){r.classList.remove("is-error");const t=r.querySelector(`.form_label-error[error-label="${e.name}"]`);t&&(t.style.display="none")}return}let r,o;if(r="checkbox"===e.type?e.checked:""!==e.value.trim(),o="brief-pro-date-periode"===e.name||"brief-private-date-periode"===e.name?e.closest('[date-switch="period-date"]'):"checkbox"===e.type?e.closest("label.w-checkbox"):e.closest(".form_field-wrapper"),r){if(e.classList.remove("is-error"),o){if(o.classList.remove("is-error"),"brief-pro-date-periode"===e.name||"brief-private-date-periode"===e.name){const e=o.querySelector(".w-dropdown-toggle");e&&e.classList.remove("is-error")}if("checkbox"===e.type){const e=o.querySelector(".w-checkbox-input");e&&e.classList.remove("is-error")}const r=o.querySelector(`.form_label-error[error-label="${e.name}"]`);r&&(r.style.display="none")}}else if(e.classList.add("is-error"),o){if(o.classList.add("is-error"),"brief-pro-date-periode"===e.name||"brief-private-date-periode"===e.name){const e=o.querySelector(".w-dropdown-toggle");e&&e.classList.add("is-error")}if("checkbox"===e.type){const e=o.querySelector(".w-checkbox-input");e&&e.classList.add("is-error")}const r=o.querySelector(`.form_label-error[error-label="${e.name}"]`);r&&(r.style.display="block")}}}));const o=r.querySelector('[date-switch="full-date"]');if(o){const e=o.querySelector('input[name="brief-pro-date-start-desktop"]'),r=o.querySelector('input[name="brief-pro-date-end-desktop"]'),t=e&&r&&""!==e.value.trim()&&""!==r.value.trim(),s=o.querySelector(".form_input.is-datepicker");if(t){s&&s.classList.remove("is-error");const e=o.querySelector('.form_label-error[error-label="brief-pro-date-start-desktop"]'),r=o.querySelector('.form_label-error[error-label="brief-pro-date-end-mobile"]');e&&(e.style.display="none"),r&&(r.style.display="none")}else{s&&s.classList.add("is-error");const e=o.querySelector('.form_label-error[error-label="brief-pro-date-start-desktop"]'),r=o.querySelector('.form_label-error[error-label="brief-pro-date-end-mobile"]');e&&(e.style.display="block"),r&&(r.style.display="block")}}const s={};r.querySelectorAll('input[type="radio"][required]').forEach((e=>{const r=e.name;s[r]||(s[r]=[]),s[r].push(e)})),Object.keys(s).forEach((e=>{const t=s[e],o=t.some((e=>e.checked));t.forEach((t=>{const s=t.closest("label.w-radio");if(o){r.querySelectorAll(`input[type="radio"][name="${e}"]`).forEach((e=>{const r=e.closest("label.w-radio");if(r){r.classList.remove("is-error");const e=r.querySelector(".w-radio-input");e&&e.classList.remove("is-error")}}))}else if(s){s.classList.add("is-error");const e=s.querySelector(".w-radio-input");e&&e.classList.add("is-error")}}))}))}))})),document.querySelectorAll("form").forEach((e=>{e.querySelectorAll("input, textarea, select").forEach((r=>{["input","change"].forEach((t=>{r.addEventListener(t,(function(){let t;if(t="checkbox"===r.type?r.checked:""!==r.value.trim(),t){let t;if(r.classList.remove("is-error"),"checkbox"===r.type){if(t=r.closest("label.w-checkbox"),t){t.classList.remove("is-error");const e=t.querySelector(".w-checkbox-input");e&&e.classList.remove("is-error")}}else if("radio"===r.type){e.querySelectorAll(`input[type="radio"][name="${r.name}"]`).forEach((e=>{const r=e.closest("label.w-radio");if(r){r.classList.remove("is-error");const e=r.querySelector(".w-radio-input");e&&e.classList.remove("is-error")}}))}else if("brief-pro-date-periode"===r.name||"brief-private-date-periode"===r.name){if(t=r.closest('[date-switch="period-date"]'),t){t.classList.remove("is-error");const e=t.querySelector(".w-dropdown-toggle");e&&e.classList.remove("is-error");const o=t.querySelector(`.form_label-error[error-label="${r.name}"]`);o&&(o.style.display="none")}}else if(t=r.closest(".form_field-wrapper"),t){t.classList.remove("is-error");const e=t.querySelector(`.form_label-error[error-label="${r.name}"]`);e&&(e.style.display="none")}}}))}))}))})),document.querySelectorAll('[date-switch="full-date"]').forEach((e=>{e.addEventListener("click",(function(){const r=e.querySelector(".form_input.is-datepicker");r&&r.classList.remove("is-error");const t=e.querySelector('.form_label-error[error-label="brief-pro-date-start-desktop"]'),o=e.querySelector('.form_label-error[error-label="brief-pro-date-end-mobile"]');t&&(t.style.display="none"),o&&(o.style.display="none")}))}))}));
