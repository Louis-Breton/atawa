document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll('[date-switch="wrapper"]').forEach((e=>{const t=e.getAttribute("data-profil");if(!t)return;const r=e.querySelector('[date-switch="switch"]'),a=e.querySelector('[date-switch="full-date"]'),o=e.querySelector('[date-switch="period-date"]');if(!r||!a||!o)return;const s=(n=t,{startDesktop:e.querySelector(`[name="brief-${n}-date-start-desktop"]`),endDesktop:e.querySelector(`[name="brief-${n}-date-end-desktop"]`),startMobile:e.querySelector(`[name="brief-${n}-date-start-mobile"]`),endMobile:e.querySelector(`[name="brief-${n}-date-end-mobile"]`),period:e.querySelector(`[name="brief-${n}-date-periode"]`)});var n;const i=e=>e&&"none"!==getComputedStyle(e).display,d=e=>{r.setAttribute("aria-checked",e),e?(a.style.display="none",o.style.display="block",Object.values(s).forEach((e=>{e&&(e.required=e===s.period)}))):(a.style.display="block",o.style.display="none",i(s.startDesktop)?(s.startDesktop&&(s.startDesktop.required=!0),s.startMobile&&(s.startMobile.required=!1)):i(s.startMobile)&&(s.startMobile&&(s.startMobile.required=!0),s.startDesktop&&(s.startDesktop.required=!1)),i(s.endDesktop)?(s.endDesktop&&(s.endDesktop.required=!0),s.endMobile&&(s.endMobile.required=!1)):i(s.endMobile)&&(s.endMobile&&(s.endMobile.required=!0),s.endDesktop&&(s.endDesktop.required=!1)),s.period&&(s.period.required=!1))},l=`date-switch-state-${t}`,u="true"===sessionStorage.getItem(l);d(u);const c=()=>{const e=!("true"===r.getAttribute("aria-checked"));d(e),sessionStorage.setItem(l,e)};r.addEventListener("click",c),r.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),c())}));new MutationObserver((()=>{const e="true"===r.getAttribute("aria-checked");d(e)})).observe(document.body,{attributes:!0,subtree:!0,attributeFilter:["style","class"]})}));const e=(navigator.language||navigator.userLanguage).startsWith("fr");$('input[daterange="start"], input[daterange="end"]').daterangepicker({opens:"left",autoUpdateInput:!1,locale:{format:e?"DD/MM/YYYY":"MM/DD/YYYY",cancelLabel:e?"Annuler":"Cancel",applyLabel:e?"Enregistrer":"Apply"}},(function(t,r){$('input[daterange="start"]').val(t.format(e?"DD/MM/YYYY":"MM/DD/YYYY")),$('input[daterange="end"]').val(r.format(e?"DD/MM/YYYY":"MM/DD/YYYY"))}))}));
