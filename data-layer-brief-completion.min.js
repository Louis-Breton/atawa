document.addEventListener("DOMContentLoaded",(function(){let e={};const t={pro:"professionnel",private:"particulier",agency:"professionnel événementiel"};function n(e,t){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:e,form:t})}function r(r,a,o,i=!1){const d=r.getAttribute("form-prefix"),c=t[d]||d,f=a.map((e=>r.querySelector(`[name="brief-${d}-${e}"], #brief-${d}-${e}`))).filter(Boolean);function u(t){const r=t.target,a=Date.now();if(e[r.name]&&a-e[r.name]<6e4)return;e[r.name]=a;const d=f.filter((e=>e&&""!==e.value.trim())).length;(i&&d===f.length||!i&&d>0)&&n(o,c)}f.forEach((e=>{e&&(e.addEventListener("change",u),e.addEventListener("blur",u))}))}document.querySelectorAll("form[form-prefix]").forEach((a=>{!function(e){const r=e.getAttribute("form-prefix"),a=t[r]||r,o=e.querySelector(`#brief-${r}-date-start-desktop`),i=e.querySelector(`#brief-${r}-date-end-desktop`),d=e.querySelector(`#brief-${r}-date-start-mobile`),c=e.querySelector(`#brief-${r}-date-end-mobile`),f=e.querySelector(`#brief-${r}-date-periode`);function u(){(o?.value&&i?.value||d?.value&&c?.value||f?.value)&&n("add_dates",a)}[o,i,d,c,f].forEach((e=>{e&&e.addEventListener("change",u)})),o&&$(o).on("apply.daterangepicker",(()=>{u()}))}(a),function(r){const a=r.getAttribute("form-prefix"),o=t[a]||a,i=r.querySelector(`#brief-${a}-budget`);i&&i.addEventListener("change",(t=>{const r=t.target;e[r.name]||(e[r.name]=Date.now(),""!==r.value.trim()&&n("add_budget",o))}))}(a),r(a,["postal-code","country"],"add_shipping_info",!0),r(a,["guest","surface"],"add_event_details"),r(a,["first-name","last-name","email","phone"],"add_contact_info",!0)}))}));
