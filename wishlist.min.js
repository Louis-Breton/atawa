document.addEventListener("DOMContentLoaded",(function(){const t="wishlist",e=document.querySelector('.drawer_body[wl="list"]'),n=document.querySelector('[wl="empty"]'),l=document.querySelector('[wl="cta"]'),r=document.querySelector('[wl="counter-label"]'),o=document.querySelector('[wl="counter-wrap"]');let i=JSON.parse(localStorage.getItem(t)||"[]");function c(){try{localStorage.setItem(t,JSON.stringify(i))}catch(t){console.error("Erreur lors de l'accès au localStorage:",t)}}function s(){document.querySelectorAll('[wl="counter"]').forEach((t=>t.textContent=i.length)),function(){const t=(navigator.language||navigator.userLanguage).startsWith("fr"),e=i.length,n=t?e<=1?"produit ajouté :":"produits ajoutés :":e<=1?"product:":"products:";r&&(r.textContent=` ${n}`)}(),o&&(o.style.display=0===i.length?"none":"block")}function a(){0===i.length?(n.style.display="flex",l.style.display="none"):(n.style.display="none",l.style.display="block")}function d(){document.querySelectorAll('[wl="button"]').forEach((t=>{const e=t.getAttribute("wl-id"),n=i.some((t=>t.id===e));t.classList.toggle("is-active",n),t.setAttribute("data-tooltip",n?"Retirer de ma wishlist":"Ajouter à ma wishlist"),t.setAttribute("aria-pressed",n)}))}function u(){e.innerHTML="",i.forEach((t=>{const n=document.createElement("div");n.classList.add("wishlist_card"),n.setAttribute("wl-card","card");const l=document.createElement("div");l.classList.add("wishlist_card-image");const r=document.createElement("img");r.src=t.image,r.alt=t.name,r.classList.add("image-cover"),r.setAttribute("wl-card","image"),l.appendChild(r);const o=document.createElement("div");o.classList.add("wishlist_card-content");const a=document.createElement("p");a.classList.add("fs-9","text-neutral_400","text-style-ellipsis"),a.setAttribute("wl-card","category"),a.textContent=t.category;const m=document.createElement("a");m.href=t.link,m.classList.add("text-secondary_950-base","text-style-ellipsis"),m.setAttribute("wl-card","name-link"),m.textContent=t.name;const p=document.createElement("div");p.classList.add("wishlist_remove-product","w-embed"),p.setAttribute("wl-card","remove"),p.setAttribute("data-tooltip","Retirer de la wishlist"),p.innerHTML='\n                <svg aria-hidden="true" viewBox="0 0 24 24" fill="none" role="img" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M5.5 5.5L12 12M12 12L18.5 18.5M12 12L5.5 18.5M12 12L18.5 5.5" \n                        stroke="currentColor" stroke-linecap="round" stroke-width="1.5" stroke-linejoin="round"></path>\n                </svg>\n            ',p.addEventListener("click",(()=>function(t){const e=i.findIndex((e=>e.id===t));e>-1&&(i.splice(e,1),c(),d(),u(),s())}(t.id))),o.appendChild(a),o.appendChild(m),o.appendChild(p),n.appendChild(l),n.appendChild(o),e.appendChild(n)})),a()}d(),a(),s(),u(),document.querySelectorAll('[wl="button"]').forEach((t=>{t.addEventListener("click",(()=>function(t){const e=t.closest('[wl="product"]'),n=t.getAttribute("wl-id"),l={id:n,name:e.querySelector('[wl="name"]').textContent,link:e.querySelector('[wl="link"]').getAttribute("href"),image:e.querySelector('[wl="image"]').getAttribute("src"),category:e.querySelector('[wl="category"]').textContent},r=i.findIndex((t=>t.id===n));r>-1?i.splice(r,1):i.push(l),c(),d(),a(),u(),s()}(t)))}))}));