document.addEventListener("DOMContentLoaded",(function(){const t="wishlist",e=document.querySelector('.drawer_body[wl="list"]'),n=document.querySelector('[wl="empty"]'),l=document.querySelector('[wl="cta"]'),o=document.querySelector('[wl="counter-label"]');let i=JSON.parse(localStorage.getItem(t)||"[]");function r(){try{localStorage.setItem(t,JSON.stringify(i))}catch(t){console.error("Erreur lors de l'accès au localStorage:",t)}}function s(){document.querySelectorAll('[wl="counter"]').forEach((t=>t.textContent=i.length)),function(){const t=(navigator.language||navigator.userLanguage).startsWith("fr"),e=i.length,n=t?e<=1?"produit ajouté :":"produits ajoutés :":e<=1?"product:":"products:";o&&(o.textContent=` ${n}`)}()}function c(){0===i.length?(n.style.display="flex",l.style.display="none"):(n.style.display="none",l.style.display="block")}function a(){document.querySelectorAll('[wl="button"]').forEach((t=>{const e=t.getAttribute("wl-id"),n=i.some((t=>t.id===e));t.classList.toggle("is-active",n),t.setAttribute("data-tooltip",n?"Retirer de ma wishlist":"Ajouter à ma wishlist"),t.setAttribute("aria-pressed",n)}))}function d(){e.innerHTML="",i.forEach((t=>{const n=document.createElement("div");n.classList.add("wishlist_card"),n.setAttribute("wl-card","card");const l=document.createElement("div");l.classList.add("wishlist_card-image");const o=document.createElement("img");o.src=t.image,o.alt=t.name,o.classList.add("image-cover"),o.setAttribute("wl-card","image"),l.appendChild(o);const c=document.createElement("div");c.classList.add("wishlist_card-content");const u=document.createElement("p");u.classList.add("fs-9","text-neutral_400","text-style-ellipsis"),u.setAttribute("wl-card","category"),u.textContent=t.category;const m=document.createElement("a");m.href=t.link,m.classList.add("text-secondary_950-base","text-style-ellipsis"),m.setAttribute("wl-card","name-link"),m.textContent=t.name;const p=document.createElement("div");p.classList.add("wishlist_remove-product","w-embed"),p.setAttribute("wl-card","remove"),p.setAttribute("data-tooltip","Retirer de la wishlist"),p.innerHTML='\n                <svg aria-hidden="true" viewBox="0 0 24 24" fill="none" role="img" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M5.5 5.5L12 12M12 12L18.5 18.5M12 12L5.5 18.5M12 12L18.5 5.5" \n                        stroke="currentColor" stroke-linecap="round" stroke-width="1.5" stroke-linejoin="round"></path>\n                </svg>\n            ',p.addEventListener("click",(()=>function(t){const e=i.findIndex((e=>e.id===t));e>-1&&(i.splice(e,1),r(),a(),d(),s())}(t.id))),c.appendChild(u),c.appendChild(m),c.appendChild(p),n.appendChild(l),n.appendChild(c),e.appendChild(n)})),c()}document.body.addEventListener("click",(function(t){const e=t.target.closest('[wl="button"]');e&&function(t){const e=t.closest('[wl="product"]'),n=t.getAttribute("wl-id"),l={id:n,name:e.querySelector('[wl="name"]').textContent,link:e.querySelector('[wl="link"]').getAttribute("href"),image:e.querySelector('[wl="image"]').getAttribute("src"),category:e.querySelector('[wl="category"]').textContent},o=i.findIndex((t=>t.id===n));o>-1?i.splice(o,1):i.push(l),r(),a(),c(),d(),s()}(e)})),a(),c(),s(),d()}));