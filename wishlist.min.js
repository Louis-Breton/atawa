document.addEventListener("DOMContentLoaded",(function(){const t="wishlist",e=document.querySelector('.drawer_body[wl="list"]'),n=document.querySelector('[wl="empty"]'),l=document.querySelector('[wl="cta"]'),i=document.querySelector('[wl="counter-label"]');let r=JSON.parse(localStorage.getItem(t))||[];function o(){document.querySelectorAll('[wl="counter"]').forEach((t=>t.textContent=r.length)),function(){const t=(navigator.language||navigator.userLanguage).startsWith("fr"),e=r.length,n=t?e<=1?"produit ajouté :":"produits ajoutés :":e<=1?"product:":"products:";i.textContent=` ${n}`}()}function s(){0===r.length?(n.style.display="flex",l.style.display="none"):(n.style.display="none",l.style.display="block")}function a(){document.querySelectorAll('[wl="button"]').forEach((t=>{const e=t.getAttribute("wl-id");r.find((t=>t.id===e))?(t.classList.add("is-active"),t.setAttribute("data-tooltip","Retirer de ma wishlist")):(t.classList.remove("is-active"),t.setAttribute("data-tooltip","Ajouter à ma wishlist"))}))}function c(){const n=JSON.parse(localStorage.getItem(t))||[];e.innerHTML="",n.forEach((n=>{const l=document.createElement("div");l.classList.add("wishlist_card"),l.setAttribute("wl-card","card"),l.innerHTML=`\n                <div class="wishlist_card-image">\n                    <img src="${n.image}" loading="lazy" alt="${n.name}" class="image-cover" wl-card="image">\n                </div>\n                <div class="wishlist_card-content">\n                    <p class="fs-9 text-neutral_400 text-style-ellipsis" wl-card="category">${n.category}</p>\n                    <a href="${n.link}" class="text-secondary_950-base text-style-ellipsis" wl-card="name-link">${n.name}</a>\n                    <div data-tooltip="Retirer de la wishlist" class="wishlist_remove-product w-embed" wl-card="remove">\n                        <svg aria-hidden="true" viewBox="0 0 24 24" fill="none" role="img" xmlns="http://www.w3.org/2000/svg">\n                            <path d="M5.5 5.5L12 12M12 12L18.5 18.5M12 12L5.5 18.5M12 12L18.5 5.5" \n                                  stroke="currentColor" stroke-linecap="round" stroke-width="1.5" stroke-linejoin="round"></path>\n                        </svg>\n                    </div>\n                </div>\n            `,l.querySelector('[wl-card="remove"]').addEventListener("click",(()=>{!function(e){const n=r.findIndex((t=>t.id===e));n>-1&&(r.splice(n,1),localStorage.setItem(t,JSON.stringify(r)),a())}(n.id),l.remove(),c(),a()})),e.appendChild(l)})),s(),o()}document.querySelectorAll('[wl="button"]').forEach((e=>{e.addEventListener("click",(()=>function(e){const n=e.closest('[wl="product"]'),l=e.getAttribute("wl-id"),i={id:l,name:n.querySelector('[wl="name"]').textContent,link:n.querySelector('[wl="link"]').getAttribute("href"),image:n.querySelector('[wl="image"]').getAttribute("src"),category:n.querySelector('[wl="category"]').textContent},a=r.findIndex((t=>t.id===l));a>-1?r.splice(a,1):r.push(i),localStorage.setItem(t,JSON.stringify(r)),updateWishlistButtons(),s(),c(),o()}(e)))})),a(),s(),o(),c()}));