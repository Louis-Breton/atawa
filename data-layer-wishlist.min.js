!function(){const e="wishlist";function t(t){const o=function(){try{return JSON.parse(localStorage.getItem(e))||[]}catch(e){return console.error("Erreur de parsing de la wishlist :",e),[]}}();if(!Array.isArray(t))return;const n=new Set(o.map((e=>e.id))),a=new Set(t.map((e=>e.id))),s=t.filter((e=>!n.has(e.id))),r=o.filter((e=>!a.has(e.id)));s.length>0&&(console.log("Produits ajoutés à la wishlist :",s),i("add_to_wishlist",s)),r.length>0&&(console.log("Produits retirés de la wishlist :",r),i("remove_from_wishlist",r))}function i(e,t){0!==t.length&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:e,items:t.map((e=>({item_id:e.id,item_name:e.name,item_category:e.category})))}),console.log(`Événement envoyé : ${e}`,t))}!function(){const i=localStorage.setItem;localStorage.setItem=function(o,n){if(o===e){t(JSON.parse(n))}i.apply(this,arguments)}}(),console.log("Surveillance de la wishlist activée !")}();
