!function(){const e="wishlist";function t(e,t){0!==t.length&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:e,items:t.map((e=>({item_id:e.id,item_name:e.name,item_category:e.category})))}),console.log(`Événement envoyé : ${e}`,t))}window.addEventListener("storage",(function(i){if(i.key!==e)return;const n=function(){try{return JSON.parse(localStorage.getItem(e))||[]}catch(e){return console.error("Erreur de parsing de la wishlist :",e),[]}}(),r=i.newValue?JSON.parse(i.newValue):[];if(!Array.isArray(r))return;const a=new Set(n.map((e=>e.id))),o=new Set(r.map((e=>e.id))),s=r.filter((e=>!a.has(e.id))),l=n.filter((e=>!o.has(e.id)));s.length>0&&(console.log("Produit ajouté à la wishlist :",s),t("add_to_wishlist",s)),l.length>0&&(console.log("Produit retiré de la wishlist :",l),t("remove_from_wishlist",l))}))}();
