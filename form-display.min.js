document.addEventListener("DOMContentLoaded",()=>{const formContainer=document.querySelector('[form-element="container"]'),triggersContainer=document.querySelector('[form-element="triggers"]'),triggerButtons=triggersContainer.querySelectorAll("[form-trigger]"),forms={pro:document.querySelector('[form-profil="pro"]'),private:document.querySelector('[form-profil="private"]')},resetButton=formContainer.querySelector('[form-element="reset-btn"]'),wishlistElement=document.querySelector('[form-element="wishlist"]'),resetDisplay=()=>{formContainer.style.display="none",triggersContainer.style.display="block",Object.values(forms).forEach(form=>{form&&(form.style.display="none")}),localStorage.removeItem("formPreference"),localStorage.removeItem("formPreferenceExpiration")},ensureWishlistVisible=()=>{wishlistElement&&"none"===getComputedStyle(wishlistElement).display&&(wishlistElement.style.display="block")},isPreferenceExpired=()=>{const expiration=localStorage.getItem("formPreferenceExpiration");if(!expiration)return!0;return new Date().getTime()>parseInt(expiration,10)},savedPreference=localStorage.getItem("formPreference");savedPreference&&forms[savedPreference]&&!isPreferenceExpired()?(formContainer.style.display="block",triggersContainer.style.display="none",Object.keys(forms).forEach(key=>{forms[key].style.display=key===savedPreference?"block":"none"})):resetDisplay(),ensureWishlistVisible(),triggerButtons.forEach(trigger=>{trigger.addEventListener("click",()=>{const formType=trigger.getAttribute("form-trigger");formType&&forms[formType]&&(formContainer.style.display="block",triggersContainer.style.display="none",Object.keys(forms).forEach(key=>{forms[key].style.display=key===formType?"block":"none"}),localStorage.setItem("formPreference",formType),localStorage.setItem("formPreferenceExpiration",new Date().getTime()+36e5))})}),resetButton.addEventListener("click",()=>{resetDisplay(),ensureWishlistVisible()})});
