document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector('[form-element="container"]'),t=document.querySelector('[form-element="triggers"]'),o=t.querySelectorAll("[form-trigger]"),l=e.querySelector('[form-element="reset-btn"]'),r=document.querySelector('[form-element="wishlist"]'),a=document.querySelector('[role-pro="wrapper"]'),n=document.querySelector('[role-label="destination"]'),c=document.querySelector("#brief-pro-company"),s=document.querySelector("#brief-pro-lead-role"),i={};document.querySelectorAll("[form-profil]").forEach((e=>{const t=e.getAttribute("form-profil");i[t]=e}));const d=()=>{e.style.display="none",t.style.display="block",o.forEach((e=>{e.style.removeProperty("display")})),Object.values(i).forEach((e=>{e.style.display="none"})),a&&(a.style.display="none"),localStorage.removeItem("formPreference"),localStorage.removeItem("formPreferenceExpiration"),localStorage.removeItem("leadRoleLabel"),localStorage.removeItem("leadRoleValue"),localStorage.removeItem("leadCompanyPlaceholder"),c&&(c.placeholder="Indiquez votre entreprise"),n&&(n.textContent=""),s&&(s.value="")},m=localStorage.getItem("formPreference");if(m&&i[m]&&!(()=>{const e=localStorage.getItem("formPreferenceExpiration");return!e||Date.now()>parseInt(e,10)})()){if(e.style.display="block",t.style.display="none",Object.entries(i).forEach((([e,t])=>{t.style.display=e===m?"block":"none"})),"pro"===m){if(n&&(n.textContent=localStorage.getItem("leadRoleLabel")||""),c){const e=localStorage.getItem("leadCompanyPlaceholder");e&&(c.placeholder=e)}s&&(s.value=localStorage.getItem("leadRoleValue")||"")}}else d();o.forEach((l=>{l.addEventListener("click",(()=>{const r=l.getAttribute("form-trigger");if(r)return"pro"===r&&a?(a.style.display="block",void o.forEach((e=>{e!==l&&(e.style.display="none")}))):void(i[r]&&(e.style.display="block",t.style.display="none",Object.entries(i).forEach((([e,t])=>{t.style.display=e===r?"block":"none"})),localStorage.setItem("formPreference",r),localStorage.setItem("formPreferenceExpiration",Date.now()+36e5)))}))})),l.addEventListener("click",d),a&&a.addEventListener("click",(o=>{const l=o.target.closest("[role-value]");if(!l)return;const r=l.getAttribute("role-value")||"",d=l.getAttribute("role-company")||"",m=l.querySelector('[role-label="origin"]')?.textContent.trim()||"";s&&(s.value=r),c&&(c.placeholder=d),n&&(n.textContent=m),localStorage.setItem("formPreference","pro"),localStorage.setItem("formPreferenceExpiration",Date.now()+36e5),localStorage.setItem("leadRoleLabel",m),localStorage.setItem("leadRoleValue",r),localStorage.setItem("leadCompanyPlaceholder",d),i.pro&&(e.style.display="block",t.style.display="none",i.pro.style.display="block"),a.style.display="none",window.scrollTo({top:0,behavior:"auto"})})),(()=>{if(!r)return;const e=localStorage.getItem("wishlist");if(!e)return r.style.display="none";const t=JSON.parse(e);r.style.display=t.length>0?"block":"none"})()}));
