document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector('[form-element="container"]'),t=document.querySelector('[form-element="triggers"]'),o=t.querySelectorAll("[form-trigger]"),r=e.querySelector('[form-element="reset-btn"]'),l=document.querySelector('[form-element="wishlist"]'),n=document.querySelector('[role-pro="wrapper"]'),c=document.querySelector("#brief-pro-lead-role"),s=document.querySelector("#brief-pro-company"),a=document.querySelector('p[role-label="destination"]'),i={};document.querySelectorAll("[form-profil]").forEach((e=>{const t=e.getAttribute("form-profil");i[t]=e}));const y=()=>{e.style.display="none",t.style.display="block",n&&(n.style.display="none"),o.forEach((e=>{e.style.removeProperty("display"),e.style.removeProperty("border-color")})),Object.values(i).forEach((e=>{e.style.display="none"})),localStorage.removeItem("formPreference"),localStorage.removeItem("formPreferenceExpiration")},m=localStorage.getItem("formPreference");m&&i[m]&&!(()=>{const e=localStorage.getItem("formPreferenceExpiration");if(!e)return!0;return Date.now()>parseInt(e,10)})()?(e.style.display="block",t.style.display="none",Object.entries(i).forEach((([e,t])=>{t.style.display=e===m?"block":"none"}))):y(),o.forEach((r=>{r.addEventListener("click",(()=>{const l=r.getAttribute("form-trigger");if("pro"===l)return n&&(n.style.display="block"),void o.forEach((e=>{e!==r&&(e.style.display="none")}));l&&i[l]&&(e.style.display="block",t.style.display="none",Object.entries(i).forEach((([e,t])=>{t.style.display=e===l?"block":"none"})),localStorage.setItem("formPreference",l),localStorage.setItem("formPreferenceExpiration",Date.now()+36e5))}))})),document.querySelectorAll("[role-value]").forEach((o=>{o.addEventListener("click",(()=>{const r=o.getAttribute("role-value"),l=o.getAttribute("role-company"),y=o.querySelector('[role-label="origin"]'),m=y?y.textContent:"";c&&(c.value=r),l&&s&&(s.placeholder=l),a&&m&&(a.textContent=m),n&&(n.style.display="none"),window.scrollTo(0,0);const d="pro";i[d]&&(e.style.display="block",t.style.display="none",Object.entries(i).forEach((([e,t])=>{t.style.display=e===d?"block":"none"})),localStorage.setItem("formPreference",d),localStorage.setItem("formPreferenceExpiration",Date.now()+36e5))}))})),r.addEventListener("click",y),(()=>{if(l){const e=localStorage.getItem("wishlist");if(e){const t=JSON.parse(e);l.style.display=t.length>0?"block":"none",console.log(`Wishlist ${t.length>0?"visible":"cachée"}, nombre d'éléments :`,t.length)}else l.style.display="none",console.log("Wishlist cachée car aucune clé 'wishlist' trouvée.")}else console.error("Élément wishlist introuvable.")})()}));
