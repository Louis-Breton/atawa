document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector('[form-element="container"]'),t=document.querySelector('[form-element="triggers"]'),o=t.querySelectorAll("[form-trigger]"),l=e.querySelector('[form-element="reset-btn"]'),r=document.querySelector('[form-element="wishlist"]'),n=document.querySelector('[role-pro="wrapper"]'),c=document.querySelector("#brief-pro-lead-role"),s=document.querySelector("#brief-pro-company"),a=document.querySelector('p[role-label="destination"]'),i={};document.querySelectorAll("[form-profil]").forEach((e=>{const t=e.getAttribute("form-profil");i[t]=e}));const y=()=>{e.style.display="none",t.style.display="block",n&&(n.style.display="none"),o.forEach((e=>e.style.display="inline-block")),Object.values(i).forEach((e=>{e.style.display="none"})),localStorage.removeItem("formPreference"),localStorage.removeItem("formPreferenceExpiration")},m=localStorage.getItem("formPreference");m&&i[m]&&!(()=>{const e=localStorage.getItem("formPreferenceExpiration");if(!e)return!0;return Date.now()>parseInt(e,10)})()?(e.style.display="block",t.style.display="none",Object.entries(i).forEach((([e,t])=>{t.style.display=e===m?"block":"none"}))):y(),o.forEach((l=>{l.addEventListener("click",(()=>{const r=l.getAttribute("form-trigger");if("pro"===r)return n&&(n.style.display="block"),void o.forEach((e=>{e!==l&&(e.style.display="none")}));r&&i[r]&&(e.style.display="block",t.style.display="none",Object.entries(i).forEach((([e,t])=>{t.style.display=e===r?"block":"none"})),localStorage.setItem("formPreference",r),localStorage.setItem("formPreferenceExpiration",Date.now()+36e5))}))})),document.querySelectorAll("[role-value]").forEach((o=>{o.addEventListener("click",(()=>{const l=o.getAttribute("role-value"),r=o.getAttribute("role-company"),y=o.querySelector('[role-label="origin"]'),m=y?y.textContent:"";c&&(c.value=l),r&&s&&(s.placeholder=r),a&&m&&(a.textContent=m),n&&(n.style.display="none"),window.scrollTo(0,0);const d="pro";i[d]&&(e.style.display="block",t.style.display="none",Object.entries(i).forEach((([e,t])=>{t.style.display=e===d?"block":"none"})),localStorage.setItem("formPreference",d),localStorage.setItem("formPreferenceExpiration",Date.now()+36e5))}))})),l.addEventListener("click",y),(()=>{if(r){const e=localStorage.getItem("wishlist");if(e){const t=JSON.parse(e);r.style.display=t.length>0?"block":"none",console.log(`Wishlist ${t.length>0?"visible":"cachée"}, nombre d'éléments :`,t.length)}else r.style.display="none",console.log("Wishlist cachée car aucune clé 'wishlist' trouvée.")}else console.error("Élément wishlist introuvable.")})()}));
