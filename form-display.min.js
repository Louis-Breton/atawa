document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector('[form-element="container"]'),t=document.querySelector('[form-element="triggers"]'),o=t.querySelectorAll("[form-trigger]"),r=e.querySelector('[form-element="reset-btn"]'),l=document.querySelector('[form-element="wishlist"]'),n={};document.querySelectorAll("[form-profil]").forEach((e=>{const t=e.getAttribute("form-profil");n[t]=e}));const c=()=>{e.style.display="none",t.style.display="block",Object.values(n).forEach((e=>{e.style.display="none"})),localStorage.removeItem("formPreference"),localStorage.removeItem("formPreferenceExpiration")},s=localStorage.getItem("formPreference");s&&n[s]&&!(()=>{const e=localStorage.getItem("formPreferenceExpiration");if(!e)return!0;return Date.now()>parseInt(e,10)})()?(e.style.display="block",t.style.display="none",Object.entries(n).forEach((([e,t])=>{t.style.display=e===s?"block":"none"}))):c(),o.forEach((o=>{o.addEventListener("click",(()=>{const r=o.getAttribute("form-trigger");r&&n[r]&&(e.style.display="block",t.style.display="none",Object.entries(n).forEach((([e,t])=>{t.style.display=e===r?"block":"none"})),localStorage.setItem("formPreference",r),localStorage.setItem("formPreferenceExpiration",Date.now()+36e5))}))})),r.addEventListener("click",c),(()=>{if(l){const e=localStorage.getItem("wishlist");if(e){const t=JSON.parse(e);l.style.display=t.length>0?"block":"none",console.log(`Wishlist ${t.length>0?"visible":"cachée"}, nombre d'éléments :`,t.length)}else l.style.display="none",console.log("Wishlist cachée car aucune clé 'wishlist' trouvée.")}else console.error("Élément wishlist introuvable.")})()}));
