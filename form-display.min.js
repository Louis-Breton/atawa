document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector('[form-element="container"]'),t=document.querySelector('[form-element="triggers"]'),o=t.querySelectorAll("[form-trigger]"),r=e.querySelector('[form-element="reset-btn"]'),l=document.querySelector('[form-element="wishlist"]'),n=document.querySelector('[role-pro="wrapper"]'),c=document.querySelector("#brief-pro-lead-role"),s={};document.querySelectorAll("[form-profil]").forEach((e=>{const t=e.getAttribute("form-profil");s[t]=e}));const a=()=>{e.style.display="none",t.style.display="block",n&&(n.style.display="none"),Object.values(s).forEach((e=>{e.style.display="none"})),localStorage.removeItem("formPreference"),localStorage.removeItem("formPreferenceExpiration")},i=localStorage.getItem("formPreference");i&&s[i]&&!(()=>{const e=localStorage.getItem("formPreferenceExpiration");if(!e)return!0;return Date.now()>parseInt(e,10)})()?(e.style.display="block",t.style.display="none",Object.entries(s).forEach((([e,t])=>{t.style.display=e===i?"block":"none"}))):a(),o.forEach((r=>{r.addEventListener("click",(()=>{const l=r.getAttribute("form-trigger");if("pro"===l)return n&&(n.style.display="block"),void o.forEach((e=>{e!==r&&(e.style.display="none")}));l&&s[l]&&(e.style.display="block",t.style.display="none",Object.entries(s).forEach((([e,t])=>{t.style.display=e===l?"block":"none"})),localStorage.setItem("formPreference",l),localStorage.setItem("formPreferenceExpiration",Date.now()+36e5))}))})),document.querySelectorAll("[role-value]").forEach((o=>{o.addEventListener("click",(()=>{const r=o.getAttribute("role-value");c&&(c.value=r),n&&(n.style.display="none"),window.scrollTo(0,0);const l="pro";s[l]&&(e.style.display="block",t.style.display="none",Object.entries(s).forEach((([e,t])=>{t.style.display=e===l?"block":"none"})),localStorage.setItem("formPreference",l),localStorage.setItem("formPreferenceExpiration",Date.now()+36e5))}))})),r.addEventListener("click",a),(()=>{if(l){const e=localStorage.getItem("wishlist");if(e){const t=JSON.parse(e);l.style.display=t.length>0?"block":"none",console.log(`Wishlist ${t.length>0?"visible":"cachée"}, nombre d'éléments :`,t.length)}else l.style.display="none",console.log("Wishlist cachée car aucune clé 'wishlist' trouvée.")}else console.error("Élément wishlist introuvable.")})()}));
